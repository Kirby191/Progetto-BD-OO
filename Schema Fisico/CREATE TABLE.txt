CREATE TABLE calcio.Giocatore (
Nome VARCHAR(50) NOT NULL,
Cognome VARCHAR(50) NOT NULL,
SSN calcio.ssn_valido NOT NULL,
Nazionalità VARCHAR(50) NOT NULL,
DataDiNascita DATE NOT NULL,
Sesso CHARACTER(1) NOT NULL,
Piede CHARACTER(1) NOT NULL,
Altezza NUMERIC(3,2) NOT NULL,
Peso NUMERIC(4,2) NOT NULL,
Ruoli calcio.RuoloType NOT NULL,
Ritirato BOOLEAN NOT NULL,
Abilità VARCHAR(50) NOT NULL,
TipoGiocatore CHARACTER(1) NOT NULL,

PRIMARY KEY (SSN),

CONSTRAINT AltezzaCorretta CHECK(Altezza > 1.50),
CONSTRAINT PesoCorretto CHECK(Peso > 40.00),
CONSTRAINT SessoCorretto CHECK(Sesso = 'M' or Sesso = 'F'),
CONSTRAINT PiedeCorretto CHECK(Sesso = 'D' or Sesso = 'S'),
CONSTRAINT TipoGiocatoreCorretto CHECK(TipoGiocatore= 'M' or TipoGiocatore= 'P')
);


CREATE TABLE calcio.Militanza(
ID_Militanza SERIAL NOT NULL,
Data_Inizio DATE NOT NULL,
Data_Fine DATE,
PartiteGiocate calcio.intero_non_negativo NOT NULL,
GoalSegnati calcio.intero_non_negativo NOT NULL,
GoalSubiti calcio.intero_non_negativo NOT NULL,
CartelliniGialli calcio.intero_non_negativo NOT NULL,
CartelliniRossi calcio.intero_non_negativo NOT NULL,
Assist calcio.intero_non_negativo NOT NULL,
TipoMilitanza CHAR(1) NOT NULL,

PRIMARY KEY (ID_Militanza),

CONSTRAINT TipoMilitanzaorretto CHECK(TipoMilitanza ='M' or TipoMilitanza ='P'));

CREATE TABLE Squadra(
NomeSquadra CHARACTER VARYING(50) NOT NULL,
Nazionalità CHARACTER VARYING(50) NOT NULL,
Data_Fondazione DATE NOT NULL,

CONSTRAINT Squadra_pkey PRIMARY KEY ("NomeSquadra,DataFondazione"),
COSTRAINT ”unique_NomeSquadra” UNIQUE (“NomeSquadra”),

CREATE TABLE Trofeo(
NomeTrofeo CHARACTER VARYING(30) NOT NULL,
Anno DATE NOT NULL,
Squadra CHARACTER(1) NOT NULL,

CONSTRAINT Trofeo_pkey PRIMARY KEY (Trofeo),

CONSTRAINT SquadraCorretto CHECK(Squadra='Y' or Squadra='N')

CREATE TABLE Allenatore(
Nome CHARACTER VARYING(50) NOT NULL,
Cognome CHARACTER VARYING(50) NOT NULL,
Sesso CHARACTER(1) NOT NULL,
SSN CHARACTER(16) NOT NULL,
InizioA DATE NOT NULL,
FineA DATE,

CONSTRAINT Allenatore_pkey PRIMARY KEY (SSN),

CONSTRAINT SuperSSN FOREIGN kEY (SSN) REFERENCE Giocatore (SSN)
ON UPDATE CASCADE
ON DELETE CASCADE 

CREATE TABLE Dirigente(
Nome CHARACTER VARYING(50) NOT NULL,
Cognome CHARACTER VARYING(50) NOT NULL,
Sesso CHARACTER(1) NOT NULL,
SSN CHARACTER(16) NOT NULL,
RuoloDirigente CHARACTER VARYING(30) NOT NULL,
InizioD DATE NOT NULL,
FineD DATE,

CREATE DOMAIN calcio.RuoloDirigente AS VARCHAR(30) CHECK(Presidente OR 
Amministratore delegato OR Dirigente sportivo OR Dirigente tecnico OR Preparatore atletico              
OR Preparatore dei portieri OR Medico sportivo OR Mental coach OR Fisioterapista
OR Osservatore OR Magazziniere) DEFAULT 'sconosciuto' NOT NULL,

Dirigente_pkey PRIMARY KEY (SSN),

CONSTRAINT SuperSSN FOREIGN kEY (SSN) REFERENCES Giocatore (SSN)
ON UPDATE CASCADE
ON DELETE CASCADE 




