--controllo che quando inserisco un allenatore non abbia lo stesso ssn di un dirigente
CREATE OR REPLACE FUNCTION Check_ssn_All()
RETURNS TRIGGER AS $$
BEGIN 
	IF EXISTS(SELECT 1
		  FROM Dirigente 
		  WHERE SSN = New.SSN) THEN
		RAISE EXCEPTION 'Allenatore % presente in Dirigente!', NEW.SSN;
	END IF;
	RETURN NEW;
END;
$$ Language plpgsql;

CREATE TRIGGER check_ssn_All
BEFORE INSERT ON Allenatore
FOR EACH ROW
EXECUTE FUNCTION Check_ssn_All();